<!DOCTYPE html>
<!--
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    Soaps MythicMobs Editor
    Created by: AlternativeSoap
    Â© 2025 AlternativeSoap - All Rights Reserved
    
    This tool is provided as-is for the MythicMobs community.
    Please respect the creator's work and give credit where due.
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soaps MythicMobs Editor - by AlternativeSoap</title>
    
    <!-- Favicon (Dragon Icon) -->
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 512'%3E%3Cpath fill='%238b5cf6' d='M352 124.5l-51.9-13c-6.5-1.6-11.3-7.1-12-13.8s2.8-13.1 8.7-16.1l40.8-20.4L294.4 28.8c-5.5-4.1-7.8-11.3-5.6-17.9S297.1 0 304 0H416h32 16c30.2 0 58.7 14.2 76.8 38.4l57.6 76.8c6.2 8.3 9.6 18.4 9.6 28.8c0 26.5-21.5 48-48 48H538.5c-17 0-33.3-6.7-45.3-18.7L480 160H448v21.5c0 24.8 12.8 47.9 33.8 61.1l106.6 66.6c32.1 20.1 51.6 55.2 51.6 93.1C640 462.9 590.9 512 530.2 512H496 432 32.3c-3.3 0-6.6-.4-9.6-1.4C13.5 507.8 6 501 2.4 492.1C1 488.7 .2 485.2 0 481.4c-.2-3.7 .3-7.3 1.3-10.7c2.8-9.2 9.6-16.7 18.6-20.4c3-1.2 6.2-2 9.5-2.2L433.3 412c8.3-.7 14.7-7.7 14.7-16.1c0-4.3-1.7-8.4-4.7-11.4l-44.4-44.4c-30-30-46.9-70.7-46.9-113.1V181.5v-57zM512 72.3c0-.1 0-.2 0-.3s0-.2 0-.3v.6zm-1.3 7.4L464.3 68.1c-.2 1.3-.3 2.6-.3 3.9c0 13.3 10.7 24 24 24c10.6 0 19.5-6.8 22.7-16.3zM130.9 116.5c16.3-14.5 40.4-16.2 58.5-4.1l130.6 87V227c0 32.8 8.4 64.8 24 93H112c-6.7 0-12.7-4.2-15-10.4s-.5-13.3 4.6-17.7L171 232.3 18.4 255.8c-7 1.1-13.9-2.6-16.9-9s-1.5-14.1 3.8-18.8L130.9 116.5z'/%3E%3C/svg%3E">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/editor.css">
    <link rel="stylesheet" href="styles/browser-modal.css">
    <link rel="stylesheet" href="styles/conditionBrowser.css">
    <link rel="stylesheet" href="styles/triggerBrowser.css">
    <link rel="stylesheet" href="styles/packImporter.css">
    <link rel="stylesheet" href="styles/skillLineBuilder.css">
    <link rel="stylesheet" href="styles/mechanicBrowser.css">
    <link rel="stylesheet" href="styles/adminPanel.css">
    <link rel="stylesheet" href="styles/adminPanelEnhanced.css">
    <link rel="stylesheet" href="styles/templateWizard.css">
    <link rel="stylesheet" href="styles/browser-management.css">
</head>
<body>
    <!-- Main Container -->
    <div id="app" class="app-container">
        
        <!-- Top Header Bar -->
        <header class="app-header">
            <div class="header-left">
                <h1 class="app-title">
                    <i class="fas fa-dragon"></i>
                    Soaps MythicMobs Editor
                </h1>
                <div class="mode-switcher">
                    <button class="mode-btn active" data-mode="beginner" title="Shows essential MythicMobs features - perfect for getting started">
                        <i class="fas fa-user"></i> Beginner
                    </button>
                    <button class="mode-btn" data-mode="advanced" title="Enables all MythicMobs features and advanced options">
                        <i class="fas fa-user-cog"></i> Advanced
                    </button>
                </div>
            </div>
            <div class="header-right">
                <!-- Sync Status -->
                <div class="sync-status synced" id="sync-status" title="Cloud sync status">
                    <i class="fas fa-cloud"></i>
                    <span class="sync-text">Synced</span>
                </div>
                
                <div class="save-status saved" id="save-status" title="Click to view recent changes">
                    <i class="fas fa-check-circle"></i>
                    <span>All changes saved</span>
                </div>
                <div class="recent-changes-dropdown hidden" id="recent-changes-dropdown">
                    <div class="dropdown-header">
                        <h4>Recent Changes</h4>
                    </div>
                    <div class="dropdown-content" id="recent-changes-list">
                        <div class="no-changes">No recent changes</div>
                    </div>
                    <div class="dropdown-footer">
                        <button class="btn btn-sm btn-secondary" id="view-all-changes-btn">View All Changes</button>
                    </div>
                </div>
                <button class="btn btn-primary" id="save-all-btn" title="Save all modified files">
                    <i class="fas fa-save"></i> Save All
                </button>
                
                <!-- User Account -->
                <div class="user-account" id="user-account">
                    <button class="icon-btn user-account-btn" id="user-account-btn" title="Account">
                        <i class="fas fa-user-circle"></i>
                    </button>
                    <div class="user-dropdown" id="user-dropdown">
                        <div class="user-info" id="user-info">
                            <i class="fas fa-user-circle" style="font-size: 2em; color: var(--primary);"></i>
                            <div>
                                <div class="user-email" id="user-email">Not signed in</div>
                                <div class="user-type" id="user-type">Anonymous User</div>
                            </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <button class="btn btn-secondary" id="syncToCloudBtn" style="display: none;">
                            <i class="fas fa-cloud-upload-alt"></i> Sync to Cloud
                        </button>
                        <button class="btn btn-secondary" id="loginBtn">
                            <i class="fas fa-sign-in-alt"></i> Sign In
                        </button>
                        <button class="btn btn-secondary" id="logoutBtn" style="display: none;">
                            <i class="fas fa-sign-out-alt"></i> Sign Out
                        </button>
                    </div>
                </div>
                
                <button class="icon-btn" id="settings-btn" title="Settings">
                    <i class="fas fa-cog"></i>
                </button>
                <button class="icon-btn" id="help-btn" title="Help">
                    <i class="fas fa-question-circle"></i>
                </button>
            </div>
        </header>

        <!-- Main Content Area -->
        <div class="app-content">
            
            <!-- Left Sidebar - File Tree -->
            <aside class="sidebar sidebar-left" id="sidebar-left">
                <div class="sidebar-header">
                    <h3><i class="fas fa-folder-tree"></i> Packs</h3>
                    <div class="header-actions">
                        <button class="icon-btn" id="new-pack-btn" title="New Pack">
                            <i class="fas fa-plus"></i>
                        </button>
                        <button class="icon-btn" id="toggle-left-sidebar" title="Hide File Tree">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                    </div>
                </div>
                <div class="sidebar-content">
                    <div id="pack-tree"></div>
                </div>
                <div class="sidebar-footer">
                    <button class="btn btn-secondary btn-sm" id="import-pack-btn">
                        <i class="fas fa-file-import"></i> Import Pack
                    </button>
                    <div style="text-align: center; padding: 8px; font-size: 11px; color: var(--text-tertiary); opacity: 0.7;">
                        Made with ðŸ’œ by <strong>AlternativeSoap</strong>
                    </div>
                </div>
            </aside>

            <!-- Left Sidebar Collapsed Strip -->
            <div class="sidebar-collapsed-strip sidebar-collapsed-left hidden" id="sidebar-left-collapsed">
                <button class="icon-btn" id="expand-left-sidebar" title="Show File Tree">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>

            <!-- Resize Handle -->
            <div class="resize-handle" id="resize-left" data-direction="horizontal"></div>

            <!-- Center Panel - Editor -->
            <main class="editor-panel">
                <!-- Breadcrumb Navigation -->
                <div class="breadcrumb" id="breadcrumb">
                    <span class="breadcrumb-item">Dashboard</span>
                </div>

                <!-- Editor Content -->
                <div class="editor-content" id="editor-content">
                    <!-- Dashboard (Default View) -->
                    <div id="dashboard-view" class="view-container active">
                        <div class="dashboard-welcome">
                            <i class="fas fa-dragon dashboard-icon"></i>
                            <h2>Welcome to Soaps MythicMobs Editor</h2>
                            <p>Create amazing custom mobs, skills, and items for your Minecraft server</p>
                            
                            <div class="quick-actions">
                                <button class="action-card" id="quick-new-mob">
                                    <i class="fas fa-skull"></i>
                                    <h3>New Mob</h3>
                                    <p>Create a custom mob</p>
                                    <span class="shortcut-badge"><kbd>Ctrl</kbd>+<kbd>N</kbd></span>
                                </button>
                                <button class="action-card" id="quick-new-skill">
                                    <i class="fas fa-magic"></i>
                                    <h3>New Skill</h3>
                                    <p>Design a skill</p>
                                    <span class="shortcut-badge"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>M</kbd></span>
                                </button>
                                <button class="action-card" id="quick-new-item">
                                    <i class="fas fa-gem"></i>
                                    <h3>New Item</h3>
                                    <p>Create custom item</p>
                                    <span class="shortcut-badge"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>I</kbd></span>
                                </button>
                                <button class="action-card" id="quick-new-droptable">
                                    <i class="fas fa-table"></i>
                                    <h3>New DropTable</h3>
                                    <p>Create loot table</p>
                                    <span class="shortcut-badge"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>T</kbd></span>
                                </button>
                                <button class="action-card" id="quick-new-randomspawn">
                                    <i class="fas fa-map-marked-alt"></i>
                                    <h3>New RandomSpawn</h3>
                                    <p>Create spawn config</p>
                                    <span class="shortcut-badge"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>R</kbd></span>
                                </button>
                                <button class="action-card" id="quick-import">
                                    <i class="fas fa-file-import"></i>
                                    <h3>Import YAML</h3>
                                    <p>Import existing config</p>
                                    <span class="shortcut-badge"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>O</kbd></span>
                                </button>
                            </div>

                            <div class="info-cards">
                                <div class="info-card">
                                    <h4><i class="fas fa-keyboard"></i> Essential Shortcuts</h4>
                                    <div class="shortcuts-grid">
                                        <div class="shortcut-group">
                                            <span class="shortcut-label">File Operations</span>
                                            <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>S</kbd> <span>Save</span></div>
                                            <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>E</kbd> <span>Export</span></div>
                                        </div>
                                        <div class="shortcut-group">
                                            <span class="shortcut-label">Quick Access</span>
                                            <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>K</kbd> <span>Command Palette</span></div>
                                            <div class="shortcut-item"><kbd>F1</kbd> <span>Help</span></div>
                                        </div>
                                        <div class="shortcut-group">
                                            <span class="shortcut-label">Create New</span>
                                            <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>N</kbd> <span>New Mob</span></div>
                                            <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>M</kbd> <span>New Skill</span></div>
                                        </div>
                                        <div class="shortcut-group">
                                            <span class="shortcut-label">Editing</span>
                                            <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>Z</kbd> <span>Undo</span></div>
                                            <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>Y</kbd> <span>Redo</span></div>
                                        </div>
                                    </div>
                                    <button class="btn-link" id="view-all-shortcuts" style="margin-top: 12px; font-size: 13px;">
                                        <i class="fas fa-list"></i> View All Shortcuts
                                    </button>
                                </div>
                                <div class="info-card">
                                    <h4><i class="fas fa-lightbulb"></i> Quick Tips</h4>
                                    <ul class="tips-list">
                                        <li><i class="fas fa-check-circle" style="color: var(--accent-color);"></i> Press <kbd>Ctrl</kbd>+<kbd>K</kbd> to quickly access any command</li>
                                        <li><i class="fas fa-check-circle" style="color: var(--accent-color);"></i> Use the right sidebar to preview YAML output</li>
                                        <li><i class="fas fa-check-circle" style="color: var(--accent-color);"></i> All changes auto-save to your browser storage</li>
                                        <li><i class="fas fa-check-circle" style="color: var(--accent-color);"></i> Export packs as YAML files when ready to use</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Mob Editor View -->
                    <div id="mob-editor-view" class="view-container"></div>

                    <!-- Skill Editor View -->
                    <div id="skill-editor-view" class="view-container"></div>

                    <!-- Item Editor View -->
                    <div id="item-editor-view" class="view-container"></div>

                    <!-- DropTable Editor View -->
                    <div id="droptable-editor-view" class="view-container"></div>

                    <!-- RandomSpawn Editor View -->
                    <div id="randomspawn-editor-view" class="view-container"></div>

                    <!-- PackInfo Editor View -->
                    <div id="packinfo-editor-view" class="view-container"></div>
                </div>
            </main>

            <!-- Resize Handle -->
            <div class="resize-handle" id="resize-right" data-direction="horizontal"></div>

            <!-- Right Sidebar - YAML Preview -->
            <aside class="sidebar sidebar-right" id="sidebar-right">
                <div class="sidebar-header">
                    <h3><i class="fas fa-code"></i> YAML Preview</h3>
                    <div class="header-actions">
                        <button class="icon-btn" id="edit-yaml-btn" title="Edit YAML">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="icon-btn" id="copy-yaml-btn" title="Copy YAML">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="icon-btn" id="toggle-right-sidebar" title="Toggle Sidebar">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
                <div class="sidebar-content">
                    <pre class="yaml-preview" id="yaml-preview-content"><code># Select an item to see YAML preview</code></pre>
                    <textarea class="yaml-editor hidden" id="yaml-editor" spellcheck="false"></textarea>
                </div>
                <div class="sidebar-footer">
                    <button class="btn btn-primary btn-sm" id="export-yaml-btn">
                        <i class="fas fa-download"></i> Export YAML
                    </button>
                </div>
            </aside>

            <!-- Right Sidebar Collapsed Strip -->
            <div class="sidebar-collapsed-strip sidebar-collapsed-right hidden" id="sidebar-right-collapsed">
                <button class="icon-btn" id="expand-right-sidebar" title="Show YAML Preview">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Container -->
    <div id="modal-container"></div>

    <!-- Toast Notifications -->
    <div id="toast-container"></div>

    <!-- Command Palette -->
    <div id="command-palette" class="command-palette hidden">
        <div class="command-palette-content">
            <input type="text" id="command-input" placeholder="Type a command or 'help' for shortcuts..." autocomplete="off">
            <div id="command-results">
                <div class="command-hint">
                    <i class="fas fa-lightbulb"></i>
                    <span>Try typing <strong>help</strong> to see all keyboard shortcuts</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Context Menu -->
    <div id="context-menu" class="context-menu hidden"></div>

    <!-- Change History Modal -->
    <div id="change-history-modal" class="modal hidden">
        <div class="modal-content change-history-modal">
            <div class="modal-header">
                <h3><i class="fas fa-history"></i> Change History</h3>
                <button class="icon-btn" id="close-history-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="history-filters">
                    <input type="text" class="form-input" id="history-search" placeholder="Search changes...">
                    <button class="btn btn-sm btn-secondary" id="clear-history-btn">
                        <i class="fas fa-trash"></i> Clear History
                    </button>
                </div>
                <div class="history-list" id="full-history-list">
                    <div class="no-changes">No changes recorded</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-content settings-modal">
            <div class="modal-header">
                <h3><i class="fas fa-cog"></i> Settings</h3>
                <button class="icon-btn" id="close-settings-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="settings-tabs">
                    <button class="settings-tab active" data-tab="general">General</button>
                    <button class="settings-tab" data-tab="editor">Editor</button>
                    <button class="settings-tab" data-tab="files">Files</button>
                    <button class="settings-tab" data-tab="history">History</button>
                </div>
                
                <div class="settings-content">
                    <!-- General Settings -->
                    <div class="settings-panel active" id="settings-general">
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Auto-save</label>
                                <span class="setting-description">Automatically save files after changes</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="setting-autosave" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Auto-save Interval</label>
                                <span class="setting-description">Delay before auto-saving (seconds)</span>
                            </div>
                            <div class="setting-control">
                                <input type="range" id="setting-autosave-interval" min="1" max="10" value="2" step="1">
                                <span class="range-value" id="autosave-interval-value">2s</span>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Animations</label>
                                <span class="setting-description">Enable UI animations and transitions</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="setting-animations" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Editor Settings -->
                    <div class="settings-panel" id="settings-editor">
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Live YAML Preview</label>
                                <span class="setting-description">Update YAML preview as you type</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="setting-live-preview" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Preview Update Delay</label>
                                <span class="setting-description">Delay before updating preview (milliseconds)</span>
                            </div>
                            <div class="setting-control">
                                <input type="range" id="setting-preview-delay" min="100" max="1000" value="300" step="50">
                                <span class="range-value" id="preview-delay-value">300ms</span>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Default Mode</label>
                                <span class="setting-description">Default editor mode on startup</span>
                            </div>
                            <select class="form-select" id="setting-default-mode">
                                <option value="beginner">Beginner</option>
                                <option value="advanced">Advanced</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Compact Mode</label>
                                <span class="setting-description">Reduce spacing in editor UI</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="setting-compact-mode">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- File Settings -->
                    <div class="settings-panel" id="settings-files">
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Include Default Values</label>
                                <span class="setting-description">Include default values in YAML export</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="setting-include-defaults">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Auto-format YAML</label>
                                <span class="setting-description">Automatically format YAML on save</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="setting-auto-format" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Warn on Duplicate File Names</label>
                                <span class="setting-description">Show warning when creating files with existing names</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="setting-warn-duplicate-files" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Internal Name Space Replacement</label>
                                <span class="setting-description">Character used to replace spaces in internal names (e.g., "My Skill" â†’ "My<span id="separator-preview">_</span>Skill")</span>
                            </div>
                            <div class="setting-control">
                                <select class="form-select" id="setting-internal-name-separator" style="width: 120px;">
                                    <option value="_">_ (underscore)</option>
                                    <option value="-">- (hyphen)</option>
                                    <option value=".">. (period)</option>
                                    <option value="|">| (pipe)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- History Settings -->
                    <div class="settings-panel" id="settings-history">
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Keep Change History</label>
                                <span class="setting-description">Track file changes in history</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="setting-keep-history" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Max History Entries</label>
                                <span class="setting-description">Maximum number of changes to remember</span>
                            </div>
                            <div class="setting-control">
                                <input type="range" id="setting-max-history" min="50" max="500" value="100" step="50">
                                <span class="range-value" id="max-history-value">100</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="reset-settings-btn">
                    <i class="fas fa-undo"></i> Reset to Defaults
                </button>
                <button class="btn btn-primary" id="save-settings-btn">
                    <i class="fas fa-check"></i> Save Settings
                </button>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div class="modal-overlay hidden" id="authModal">
        <div class="modal modal-medium">
            <div class="modal-header">
                <h2 id="auth-modal-title">
                    <i class="fas fa-user-circle"></i> Sign In
                </h2>
                <button class="modal-close" id="auth-modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="auth-tabs" id="authTabs">
                    <button class="auth-tab active" id="loginTab" data-tab="login">Sign In</button>
                    <button class="auth-tab" id="signupTab" data-tab="signup">Sign Up</button>
                </div>
                
                <!-- Login Form -->
                <form class="auth-form active" id="loginForm">
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="loginEmail" placeholder="your@email.com" autocomplete="email" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-input" id="loginPassword" placeholder="Enter your password" autocomplete="current-password" required>
                    </div>
                    <div class="auth-error" id="loginError"></div>
                    <div class="auth-success" id="loginSuccess"></div>
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-sign-in-alt"></i> Sign In
                    </button>
                    <a href="#" class="forgot-password" id="forgotPasswordBtn">Forgot password?</a>
                </form>
                
                <!-- Signup Form -->
                <form class="auth-form" id="signupForm">
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="signupEmail" placeholder="your@email.com" autocomplete="email" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-input" id="signupPassword" placeholder="Choose a password (min 6 characters)" autocomplete="new-password" required minlength="6">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Confirm Password</label>
                        <input type="password" class="form-input" id="confirmPassword" placeholder="Confirm your password" autocomplete="new-password" required minlength="6">
                    </div>
                    <div class="auth-info">
                        <i class="fas fa-info-circle"></i>
                        Your anonymous data will be automatically transferred to your new account.
                    </div>
                    <div class="auth-error" id="signupError"></div>
                    <div class="auth-success" id="signupSuccess"></div>
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-user-plus"></i> Create Account
                    </button>
                </form>
                
                <!-- Reset Password Form -->
                <form class="auth-form" id="resetPasswordForm">
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="resetEmail" placeholder="your@email.com" autocomplete="email" required>
                    </div>
                    <div class="auth-info">
                        <i class="fas fa-info-circle"></i>
                        We'll send you a link to reset your password.
                    </div>
                    <div class="auth-error" id="resetError"></div>
                    <div class="auth-success" id="resetSuccess"></div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="backToLoginBtn">
                            <i class="fas fa-arrow-left"></i> Back
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i> Send Reset Link
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>

    <!-- Data Files -->
    <script src="data/mobData.js"></script>
    <script src="data/templates.js"></script>
    <script src="data/entityFieldMap.js"></script>
    <script src="data/minecraftBlocks.js"></script>
    <script src="data/minecraftItems.js"></script>
    <script src="data/damageTypes.js"></script>
    <script src="data/bossBarData.js"></script>
    <script src="data/equipmentData.js"></script>
    <script src="data/aiGoals.js"></script>
    <script src="data/aiTargets.js"></script>
    <script src="data/vanillaOverrides.js"></script>
    <script src="data/powerSystem.js"></script>
    <script src="data/dropTypes.js"></script>
    <script src="data/fancyDrops.js"></script>
    
    <!-- Item Editor Data Files -->
    <script src="data/itemOptions.js"></script>
    <script src="data/enchantments.js"></script>
    <script src="data/potionEffects.js"></script>
    <script src="data/bannerPatterns.js"></script>
    
    <!-- Documentation Files -->
    <script src="data/audienceDocumentation.js"></script>
    <script src="data/mathDocumentation.js"></script>
    
    <!-- Conditions System (Load Order Critical) -->
    <script src="data/conditions/conditionActions.js"></script>
    <script src="data/conditions/entityConditions.js"></script>
    <script src="data/conditions/entityConditionsAdvanced.js"></script>
    <script src="data/conditions/locationConditions.js"></script>
    <script src="data/conditions/compareConditions.js"></script>
    <script src="data/conditions/metaConditions.js"></script>
    <script src="data/conditions/metaConditionsAdvanced.js"></script>
    <script src="data/conditions/metaConditionsFinal.js"></script>
    <script src="data/conditions/index.js"></script>

    <!-- Skill System Data (Load Before Components) -->
    <script src="data/targeters.js"></script>
    <script src="data/particleTypes.js"></script>
    <script src="data/mechanics.js"></script>

    <!-- Utility Files -->
    <script src="utils/logger.js"></script>
    <script src="utils/browserPerformance.js"></script>
    <script src="utils/dataStructureOptimizer.js"></script>
    <script src="utils/favoritesManager.js"></script>
    <script src="utils/helpers.js"></script>
    <script src="utils/yamlParser.js"></script>
    <script src="utils/yamlExporter.js"></script>
    <script src="utils/validators.js"></script>
    <script src="utils/skillLineParser.js"></script>
    <script src="utils/skillLineValidator.js"></script>
    <script src="utils/mechanics.js"></script>
    <script src="utils/triggers.js"></script>
    <script src="utils/targeters.js"></script>
    <script src="utils/mobTypes.js"></script>
    <script src="utils/materials.js"></script>
    <script src="utils/editorHistory.js"></script>
    <script src="utils/collapsibleManager.js"></script>
    <script src="utils/panelResizer.js"></script>

    <!-- Trigger System -->
    <script src="data/triggers.js"></script>

    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Component Files -->
    <script src="components/supabaseClient.js"></script>
    <script src="components/authManager.js"></script>
    <script src="components/authUI.js"></script>
    <script src="components/storageManager.js"></script>
    <script src="components/packManager.js"></script>
    <script src="components/fileManager.js"></script>
    <script src="components/documentationHelper.js"></script>
    <script src="components/mobEditor/EntityFieldManager.js"></script>
    
    <!-- Core Systems -->
    <script src="utils/errorLogger.js"></script>
    <script src="utils/permissionSystem.js"></script>
    <script src="components/userProfileManager.js"></script>
    
    <!-- Enhanced Dropdown with Categories & Icons -->
    <script src="data/minecraftItemCategories.js"></script>
    <script src="data/minecraftItemIcons.js"></script>
    <script src="components/searchableDropdown.js?v=2.0"></script>
    <script src="components/bossBarEditor.js"></script>
    <script src="components/equipmentEditor.js"></script>
    <script src="components/damageModifierEditor.js"></script>
    <script src="components/aiEditor.js"></script>
    <script src="components/vanillaOverridesEditor.js"></script>
    <script src="components/powerSystemEditor.js"></script>
    <script src="components/conditionBrowser.js?v=3.7"></script>
    <script src="components/inlineConditionBuilder.js"></script>
    <script src="components/triggerBrowser.js"></script>
    <script src="components/targeterBrowser.js?v=3.8"></script>
    <script src="components/mechanicBrowser.js"></script>
    <script src="components/creationModeSelector.js"></script>
    <script src="components/notificationModal.js"></script>
    <script src="components/templateManager.js"></script>
    <script src="components/templateImportExport.js"></script>
    <script src="components/templateMigration.js"></script>
    <script src="components/yamlPreviewModal.js"></script>
    <script src="components/browserDataMerger.js"></script>
    <script src="components/browserAdminManager.js"></script>
    <script src="components/attributeBuilder.js"></script>
    <script src="components/adminManager.js"></script>
    <script src="components/adminPanel.js"></script>
    <script src="components/templateWizard.js"></script>
    <script src="components/templateEditor.js"></script>
    <script src="components/templateSelector.js"></script>
    <script src="components/skillLineBuilder.js?v=3.9"></script>
    <script src="components/mechanicReference.js"></script>
    <script src="components/skillLineAutocomplete.js"></script>
    <script src="components/skillLineGroupDetector.js"></script>
    <script src="components/skillLineQuickEdit.js"></script>
    <script src="components/skillLineTooltip.js"></script>
    <script src="components/skillPatternAnalyzer.js"></script>
    <script src="components/validationPanel.js"></script>
    <script src="components/skillDependencyTracker.js"></script>
    <script src="components/skillLineFormatter.js"></script>
    <script src="components/skillLineDuplicateDetector.js"></script>
    <script src="components/skillLineSyntaxHighlighter.js"></script>
    <script src="components/keyboardShortcutManager.js"></script>
    <script src="components/historyManager.js"></script>
    <script src="components/onboardingTour.js"></script>
    <script src="utils/performanceUtils.js"></script>
    <script src="utils/lazyLoader.js"></script>
    <script src="utils/workerPool.js"></script>
    <script src="components/virtualScrollManager.js"></script>
    <script src="components/skillBuilderEditor.js"></script>
    <script src="components/mobDropsEditor.js"></script>
    <script src="components/mobEditor.js"></script>
    <script src="components/skillEditor.js"></script>
    <script src="components/itemEditor.js"></script>
    <script src="components/droptableEditor.js"></script>
    <script src="components/randomspawnEditor.js"></script>
    <script src="components/yamlEditor.js"></script>
    <script src="components/displayNameBuilder.js"></script>
    <script src="components/commandPalette.js"></script>
    <script src="components/adminPanelEnhanced.js"></script>

    <!-- Pack Importer System -->
    <script src="components/packImporter/PackFolderScanner.js"></script>
    <script src="components/packImporter/YamlFileParser.js"></script>
    <script src="components/packImporter/DataValidator.js"></script>
    <script src="components/packImporter/DataValidatorHelpers.js"></script>
    <script src="components/packImporter/ImportPreviewUI.js"></script>
    <script src="components/packImporter/ImportPreviewUIHandlers.js"></script>
    <script src="components/packImporter/ImportExecutor.js"></script>
    <script src="components/packImporter/ImportReportGenerator.js"></script>
    <script src="components/packImporter/PackImporterCore.js"></script>

    <!-- Main Application -->
    <script src="app.js"></script>

    <!-- Initialize -->
    <script>
        // Initialize the application when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize global keyboard shortcut manager
            window.keyboardShortcutManager = new KeyboardShortcutManager();
            
            // Initialize onboarding tour
            window.onboardingTour = new OnboardingTour();
            
            // Initialize global notification modal
            window.notificationModal = new NotificationModal();
            
            // Initialize global skill line builder (will be updated with dependencies later)
            window.skillLineBuilder = new SkillLineBuilder();
            
            window.editor = new MythicMobsEditor();
            window.editor.init();
            
            // Initialize template system AFTER editor (requires auth and supabase)
            setTimeout(() => {
                if (window.supabaseClient && window.editor?.authManager) {
                    // Expose authManager globally for template system
                    window.authManager = window.editor.authManager;
                    
                    window.templateManager = new TemplateManager(window.supabaseClient, window.authManager);
                    window.templateImportExport = new TemplateImportExport(window.templateManager);
                    window.templateMigration = new TemplateMigration(window.supabaseClient, window.authManager, window.templateManager);
                    window.yamlPreviewModal = new YamlPreviewModal();
                    window.templateEditor = new TemplateEditor(window.templateManager, window.authManager, window.templateImportExport);
                    window.templateWizard = new TemplateWizard(window.templateManager, window.authManager, window.templateImportExport);
                    
                    // Update global SkillLineBuilder with template dependencies
                    if (window.skillLineBuilder) {
                        window.skillLineBuilder.templateManager = window.templateManager;
                        window.skillLineBuilder.templateEditor = window.templateEditor;
                    }
                    
                    // Make templateWizard globally accessible for onclick handlers
                    window.templateWizard = window.templateWizard;
                    
                    // Initialize admin system
                    window.adminManager = new AdminManager(window.supabaseClient, window.authManager);
                    window.adminManager.initialize().then(() => {
                        // Create admin panel if user is admin
                        if (window.adminManager.isAdmin) {
                            window.adminPanel = new AdminPanel(window.adminManager, window.templateManager, window.authManager);
                            
                            // Initialize enhanced admin panel features
                            window.adminPanelEnhanced = new AdminPanelEnhanced(window.adminPanel);
                            
                            // Add admin role label to user-type (replaces email badge to avoid duplication)
                            const userType = document.getElementById('user-type');
                            if (userType) {
                                const role = window.adminManager.getCurrentRole();
                                const roleDisplay = role ? role.replace('_', ' ').toUpperCase() : 'ADMIN';
                                userType.innerHTML = `<i class="fas fa-shield-alt" style="color: #ffd700;"></i> ${roleDisplay}`;
                            }
                            
                            // Add admin panel button to user dropdown
                            const userDropdown = document.getElementById('user-dropdown');
                            const loginBtn = document.getElementById('loginBtn');
                            if (userDropdown && loginBtn) {
                                // Add Profile button
                                const profileBtn = document.createElement('button');
                                profileBtn.className = 'btn btn-secondary';
                                profileBtn.style.marginBottom = '10px';
                                profileBtn.innerHTML = `<i class="fas fa-user"></i> Edit Profile`;
                                profileBtn.onclick = () => window.userProfileManager?.showProfileEditor();
                                userDropdown.insertBefore(profileBtn, loginBtn);
                                
                                // Add Admin Panel button
                                const adminBtn = document.createElement('button');
                                adminBtn.className = 'btn btn-primary';
                                adminBtn.style.marginBottom = '10px';
                                adminBtn.innerHTML = `<i class="fas fa-shield-alt"></i> Admin Panel`;
                                adminBtn.onclick = () => window.adminPanel.open();
                                
                                // Insert before login button
                                userDropdown.insertBefore(adminBtn, loginBtn);
                            }
                        } else {
                            
                            // Add profile button for non-admin users too
                            const userDropdown = document.getElementById('user-dropdown');
                            const loginBtn = document.getElementById('loginBtn');
                            if (userDropdown && loginBtn) {
                                const profileBtn = document.createElement('button');
                                profileBtn.className = 'btn btn-secondary';
                                profileBtn.style.marginBottom = '10px';
                                profileBtn.innerHTML = `<i class="fas fa-user"></i> Edit Profile`;
                                profileBtn.onclick = () => window.userProfileManager?.showProfileEditor();
                                userDropdown.insertBefore(profileBtn, loginBtn);
                            }
                        }
                    }).catch(error => {
                        console.error('âŒ Admin system initialization failed:', error);
                    });
                    
                    // Update any existing SkillBuilderEditor instances with the new dependencies
                    if (window.editor.skillEditor?.skillBuilderEditor) {
                        window.editor.skillEditor.skillBuilderEditor.updateTemplateDependencies(
                            window.templateManager, 
                            window.templateEditor
                        );
                    }
                    if (window.editor.mobEditor?.skillsEditor) {
                        window.editor.mobEditor.skillsEditor.updateTemplateDependencies(
                            window.templateManager,
                            window.templateEditor
                        );
                    }
                } else {
                    console.warn('âš ï¸ Template system not initialized: supabaseClient or authManager missing');
                }
            }, 500);
            
            // Auto-start tour for new users after a short delay
            setTimeout(() => {
                if (window.onboardingTour.shouldAutoStart()) {
                    window.onboardingTour.start();
                }
            }, 1000);
        });
    </script>
</body>
</html>
