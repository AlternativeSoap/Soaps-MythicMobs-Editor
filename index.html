<!DOCTYPE html>
<!--
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    Soaps MythicMobs Editor
    Created by: AlternativeSoap
    Â© 2025 AlternativeSoap - All Rights Reserved
    
    This tool is provided as-is for the MythicMobs community.
    Please respect the creator's work and give credit where due.
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soaps MythicMobs Editor - by AlternativeSoap</title>
    
    <!-- Favicon (Dragon Icon) -->
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 512'%3E%3Cpath fill='%238b5cf6' d='M352 124.5l-51.9-13c-6.5-1.6-11.3-7.1-12-13.8s2.8-13.1 8.7-16.1l40.8-20.4L294.4 28.8c-5.5-4.1-7.8-11.3-5.6-17.9S297.1 0 304 0H416h32 16c30.2 0 58.7 14.2 76.8 38.4l57.6 76.8c6.2 8.3 9.6 18.4 9.6 28.8c0 26.5-21.5 48-48 48H538.5c-17 0-33.3-6.7-45.3-18.7L480 160H448v21.5c0 24.8 12.8 47.9 33.8 61.1l106.6 66.6c32.1 20.1 51.6 55.2 51.6 93.1C640 462.9 590.9 512 530.2 512H496 432 32.3c-3.3 0-6.6-.4-9.6-1.4C13.5 507.8 6 501 2.4 492.1C1 488.7 .2 485.2 0 481.4c-.2-3.7 .3-7.3 1.3-10.7c2.8-9.2 9.6-16.7 18.6-20.4c3-1.2 6.2-2 9.5-2.2L433.3 412c8.3-.7 14.7-7.7 14.7-16.1c0-4.3-1.7-8.4-4.7-11.4l-44.4-44.4c-30-30-46.9-70.7-46.9-113.1V181.5v-57zM512 72.3c0-.1 0-.2 0-.3s0-.2 0-.3v.6zm-1.3 7.4L464.3 68.1c-.2 1.3-.3 2.6-.3 3.9c0 13.3 10.7 24 24 24c10.6 0 19.5-6.8 22.7-16.3zM130.9 116.5c16.3-14.5 40.4-16.2 58.5-4.1l130.6 87V227c0 32.8 8.4 64.8 24 93H112c-6.7 0-12.7-4.2-15-10.4s-.5-13.3 4.6-17.7L171 232.3 18.4 255.8c-7 1.1-13.9-2.6-16.9-9s-1.5-14.1 3.8-18.8L130.9 116.5z'/%3E%3C/svg%3E">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/mode-comparison.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/editor.css">
    <link rel="stylesheet" href="styles/browser-modal.css">
    <link rel="stylesheet" href="styles/conditionBrowser.css">
    <link rel="stylesheet" href="styles/triggerBrowser.css">
    <link rel="stylesheet" href="styles/packImporter.css">
    <link rel="stylesheet" href="styles/skillLineBuilder.css">
    <link rel="stylesheet" href="styles/mechanicBrowser.css">
    <link rel="stylesheet" href="styles/adminPanel.css">
    <link rel="stylesheet" href="styles/adminPanelEnhanced.css">
    <link rel="stylesheet" href="styles/templateWizard.css">
    <link rel="stylesheet" href="styles/browser-management.css">
    <link rel="stylesheet" href="styles/pack-tools.css">
    <link rel="stylesheet" href="styles/totemBuilder.css">
</head>
<body>
    <!-- Main Container -->
    <div id="app" class="app-container">
        
        <!-- Top Header Bar -->
        <header class="app-header">
            <div class="header-left">
                <h1 class="app-title">
                    <i class="fas fa-dragon"></i>
                    Soaps MythicMobs Editor
                </h1>
                <div class="mode-switcher">
                    <button class="mode-btn active" data-mode="beginner" title="Shows essential MythicMobs features - perfect for getting started">
                        <i class="fas fa-user"></i> Beginner
                    </button>
                    <button class="mode-btn" data-mode="advanced" title="Enables all MythicMobs features and advanced options">
                        <i class="fas fa-user-cog"></i> Advanced
                        <i class="fas fa-info-circle mode-info-icon" id="mode-info-icon" title="What's included in Advanced mode?"></i>
                    </button>
                    <button class="mode-difference-link" id="mode-difference-btn" title="Compare Beginner and Advanced modes">
                        <i class="fas fa-question-circle"></i> What's the difference?
                    </button>
                </div>
            </div>
            <div class="header-right">
                <!-- Sync Status -->
                <div class="sync-status synced" id="sync-status" title="Cloud sync status">
                    <i class="fas fa-cloud"></i>
                    <span class="sync-text">Synced</span>
                </div>
                
                <div class="save-status saved" id="save-status" title="Click to view recent changes">
                    <i class="fas fa-check-circle"></i>
                    <span>All changes saved</span>
                </div>
                <div class="recent-changes-dropdown hidden advanced-only" id="recent-changes-dropdown">
                    <div class="dropdown-header">
                        <h4>Recent Changes</h4>
                    </div>
                    <div class="dropdown-content" id="recent-changes-list">
                        <div class="no-changes">No recent changes</div>
                    </div>
                    <div class="dropdown-footer">
                        <button class="btn btn-sm btn-secondary" id="view-all-changes-btn">View All Changes</button>
                    </div>
                </div>
                <button class="btn btn-primary" id="save-all-btn" title="Save all modified files">
                    <i class="fas fa-save"></i> Save All
                </button>
                
                <!-- User Account -->
                <div class="user-account" id="user-account">
                    <button class="icon-btn user-account-btn" id="user-account-btn" title="Account">
                        <span class="user-avatar" data-user-avatar style="display: flex; align-items: center; justify-content: center; width: 24px; height: 24px;">
                            <i class="fas fa-user-circle" style="font-size: 1.5em;"></i>
                        </span>
                    </button>
                    <div class="user-dropdown" id="user-dropdown">
                        <div class="user-info" id="user-info">
                            <span class="user-info-avatar" data-user-avatar style="display: flex; align-items: center; justify-content: center; width: 40px; height: 40px;">
                                <i class="fas fa-user-circle" style="font-size: 2em; color: var(--primary);"></i>
                            </span>
                            <div>
                                <div class="user-email" id="user-email">Not signed in</div>
                                <div class="user-type" id="user-type">Anonymous User</div>
                            </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <button class="btn btn-secondary" id="syncToCloudBtn" style="display: none;">
                            <i class="fas fa-cloud-upload-alt"></i> Sync to Cloud
                        </button>
                        <button class="btn btn-secondary" id="loginBtn">
                            <i class="fas fa-sign-in-alt"></i> Sign In
                        </button>
                        <button class="btn btn-secondary" id="logoutBtn" style="display: none;">
                            <i class="fas fa-sign-out-alt"></i> Sign Out
                        </button>
                    </div>
                </div>
                
                <!-- Tools Menu -->
                <div class="tools-menu advanced-only">
                    <button class="icon-btn" id="tools-btn" title="Tools">
                        <i class="fas fa-wrench"></i>
                    </button>
                    <div class="tools-dropdown" id="tools-dropdown">
                        <div class="tools-dropdown-item" data-tool="statistics">
                            <i class="fas fa-chart-bar"></i>
                            <div class="item-label">
                                <div class="item-text">Pack Statistics</div>
                                <span class="item-description">Analytics & metrics</span>
                            </div>
                        </div>
                        
                        <div class="tools-dropdown-item" data-tool="dependency">
                            <i class="fas fa-project-diagram"></i>
                            <div class="item-label">
                                <div class="item-text">Dependency Graph</div>
                                <span class="item-description">Ctrl+Shift+D</span>
                            </div>
                        </div>
                        
                        <div class="tools-dropdown-divider"></div>
                        
                        <div class="tools-dropdown-item" data-tool="duplicates">
                            <i class="fas fa-clone"></i>
                            <div class="item-label">
                                <div class="item-text">Duplicate Detector</div>
                                <span class="item-description">Find conflicts</span>
                            </div>
                        </div>
                        
                        <div class="tools-dropdown-item" data-tool="validator">
                            <i class="fas fa-check-circle"></i>
                            <div class="item-label">
                                <div class="item-text">Pack Validator</div>
                                <span class="item-description">Health check</span>
                            </div>
                        </div>
                        
                        <div class="tools-dropdown-item" data-tool="usage">
                            <i class="fas fa-chart-line"></i>
                            <div class="item-label">
                                <div class="item-text">Skill Usage Report</div>
                                <span class="item-description">Usage analytics</span>
                            </div>
                        </div>
                        
                        <div class="tools-dropdown-divider"></div>
                        
                        <div class="tools-dropdown-item" data-tool="backup">
                            <i class="fas fa-save"></i>
                            <div class="item-label">
                                <div class="item-text">Backup Manager</div>
                                <span class="item-description">Save & restore</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <button class="icon-btn" id="settings-btn" title="Settings">
                    <i class="fas fa-cog"></i>
                </button>
                <button class="icon-btn" id="help-btn" title="Help">
                    <i class="fas fa-question-circle"></i>
                </button>
            </div>
        </header>

        <!-- Main Content Area -->
        <div class="app-content">
            
            <!-- Left Sidebar - File Tree -->
            <aside class="sidebar sidebar-left" id="sidebar-left">
                <div class="sidebar-header">
                    <h3><i class="fas fa-folder-tree"></i> Packs</h3>
                    <div class="header-actions">
                        <button class="icon-btn" id="new-pack-btn" title="New Pack">
                            <i class="fas fa-plus"></i>
                        </button>
                        <button class="icon-btn" id="toggle-left-sidebar" title="Hide File Tree">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                    </div>
                </div>
                <div class="sidebar-content">
                    <!-- Search Box -->
                    <div class="pack-search-container">
                        <div class="search-input-wrapper">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" 
                                   id="pack-search-input" 
                                   class="pack-search-input" 
                                   placeholder="Search files..."
                                   autocomplete="off">
                            <button class="icon-btn search-clear-btn hidden" id="pack-search-clear" title="Clear search">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Recent Files Section -->
                    <div class="recent-files-section collapsed" id="recent-files-section">
                        <div class="recent-files-header" id="recent-files-header">
                            <i class="fas fa-chevron-right recent-chevron"></i>
                            <i class="fas fa-clock"></i>
                            <span>Recent Files</span>
                            <span class="badge" id="recent-files-count">0</span>
                            <button class="clear-all-btn" id="clear-recent-files-btn" title="Clear all recent files">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="recent-files-list" id="recent-files-list"></div>
                    </div>
                    
                    <!-- Favorites Section -->
                    <div class="favorites-section collapsed" id="favorites-section">
                        <div class="favorites-header" id="favorites-header">
                            <i class="fas fa-chevron-right favorites-chevron"></i>
                            <i class="fas fa-star"></i>
                            <span>Favorites</span>
                            <span class="badge" id="favorites-count">0</span>
                            <button class="clear-all-btn" id="clear-favorites-btn" title="Clear all favorites">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="favorites-list" id="favorites-list"></div>
                    </div>
                    
                    <!-- Pack Tree -->
                    <div class="pack-tree-header">
                        <span>Packs</span>
                        <div class="pack-tree-actions">
                            <button class="icon-btn" id="expand-all-btn" title="Expand All">
                                <i class="fas fa-angle-double-down"></i>
                            </button>
                            <button class="icon-btn" id="collapse-all-btn" title="Collapse All">
                                <i class="fas fa-angle-double-up"></i>
                            </button>
                        </div>
                    </div>
                    <div id="pack-tree"></div>
                </div>
                <div class="sidebar-footer">
                    <button class="btn btn-secondary btn-sm" id="import-pack-btn">
                        <i class="fas fa-file-import"></i> Import Pack
                    </button>
                    <div style="text-align: center; padding: 8px; font-size: 11px; color: var(--text-tertiary); opacity: 0.7;">
                        Made with ðŸ’œ by <strong>AlternativeSoap</strong>
                    </div>
                </div>
            </aside>

            <!-- Left Sidebar Collapsed Strip -->
            <div class="sidebar-collapsed-strip sidebar-collapsed-left hidden" id="sidebar-left-collapsed">
                <button class="icon-btn" id="expand-left-sidebar" title="Show File Tree">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>

            <!-- Resize Handle -->
            <div class="resize-handle" id="resize-left" data-direction="horizontal"></div>

            <!-- Center Panel - Editor -->
            <main class="editor-panel">
                <!-- Breadcrumb Navigation -->
                <div class="breadcrumb" id="breadcrumb">
                    <button class="breadcrumb-home" id="breadcrumb-home" title="Back to Dashboard (ESC)">
                        <i class="fas fa-home"></i>
                    </button>
                    <span class="breadcrumb-item">Dashboard</span>
                </div>

                <!-- Editor Content -->
                <div class="editor-content" id="editor-content">
                    <!-- Dashboard (Default View) -->
                    <div id="dashboard-view" class="view-container active">
                        <div class="dashboard-welcome">
                            <i class="fas fa-dragon dashboard-icon"></i>
                            <h2>Welcome to Soaps MythicMobs Editor</h2>
                            <p>Create amazing custom mobs, skills, and items for your Minecraft server</p>
                            
                            <div class="quick-actions">
                                <button class="action-card" id="quick-new-mob">
                                    <i class="fas fa-skull"></i>
                                    <h3>New Mob</h3>
                                    <p>Create a custom mob</p>
                                    <span class="shortcut-badge"><kbd>Ctrl</kbd>+<kbd>N</kbd></span>
                                </button>
                                <button class="action-card" id="quick-new-skill">
                                    <i class="fas fa-magic"></i>
                                    <h3>New Skill</h3>
                                    <p>Design a skill</p>
                                    <span class="shortcut-badge"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>M</kbd></span>
                                </button>
                                <button class="action-card" id="quick-new-item">
                                    <i class="fas fa-gem"></i>
                                    <h3>New Item</h3>
                                    <p>Create custom item</p>
                                    <span class="shortcut-badge"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>I</kbd></span>
                                </button>
                                <button class="action-card" id="quick-new-droptable">
                                    <i class="fas fa-table"></i>
                                    <h3>New DropTable</h3>
                                    <p>Create loot table</p>
                                    <span class="shortcut-badge"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>T</kbd></span>
                                </button>
                                <button class="action-card advanced-only" id="quick-new-randomspawn">
                                    <i class="fas fa-map-marked-alt"></i>
                                    <h3>New RandomSpawn</h3>
                                    <p>Create spawn config</p>
                                    <span class="shortcut-badge"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>R</kbd></span>
                                </button>
                                <button class="action-card advanced-only" id="quick-import">
                                    <i class="fas fa-file-import"></i>
                                    <h3>Import YAML</h3>
                                    <p>Import existing config</p>
                                    <span class="shortcut-badge"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>O</kbd></span>
                                </button>
                            </div>

                            <div class="info-cards">
                                <div class="info-card">
                                    <h4><i class="fas fa-keyboard"></i> Essential Shortcuts</h4>
                                    <div class="shortcuts-grid">
                                        <div class="shortcut-group">
                                            <span class="shortcut-label">File Operations</span>
                                            <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>S</kbd> <span>Save</span></div>
                                            <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>E</kbd> <span>Export</span></div>
                                        </div>
                                        <div class="shortcut-group">
                                            <span class="shortcut-label">Quick Access</span>
                                            <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>K</kbd> <span>Command Palette</span></div>
                                            <div class="shortcut-item"><kbd>F1</kbd> <span>Help</span></div>
                                        </div>
                                        <div class="shortcut-group">
                                            <span class="shortcut-label">Create New</span>
                                            <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>N</kbd> <span>New Mob</span></div>
                                            <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>M</kbd> <span>New Skill</span></div>
                                        </div>
                                        <div class="shortcut-group">
                                            <span class="shortcut-label">Editing</span>
                                            <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>D</kbd> <span>Duplicate</span></div>
                                            <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>Z</kbd> <span>Undo</span></div>
                                            <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>Y</kbd> <span>Redo</span></div>
                                        </div>
                                    </div>
                                    <button class="btn-link" id="view-all-shortcuts" style="margin-top: 12px; font-size: 13px;">
                                        <i class="fas fa-list"></i> View All Shortcuts
                                    </button>
                                </div>
                                <div class="info-card">
                                    <h4><i class="fas fa-lightbulb"></i> Quick Tips</h4>
                                    <ul class="tips-list">
                                        <li><i class="fas fa-check-circle" style="color: var(--accent-color);"></i> Press <kbd>Ctrl</kbd>+<kbd>K</kbd> to quickly access any command</li>
                                        <li><i class="fas fa-check-circle" style="color: var(--accent-color);"></i> Use the right sidebar to preview YAML output</li>
                                        <li><i class="fas fa-check-circle" style="color: var(--accent-color);"></i> All changes auto-save to your browser storage</li>
                                        <li><i class="fas fa-check-circle" style="color: var(--accent-color);"></i> Export packs as YAML files when ready to use</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Mob Editor View -->
                    <div id="mob-editor-view" class="view-container"></div>

                    <!-- Skill Editor View -->
                    <div id="skill-editor-view" class="view-container"></div>

                    <!-- Item Editor View -->
                    <div id="item-editor-view" class="view-container"></div>

                    <!-- DropTable Editor View -->
                    <div id="droptable-editor-view" class="view-container"></div>

                    <!-- RandomSpawn Editor View -->
                    <div id="randomspawn-editor-view" class="view-container"></div>

                    <!-- PackInfo Editor View -->
                    <div id="packinfo-editor-view" class="view-container"></div>
                </div>
            </main>

            <!-- Resize Handle -->
            <div class="resize-handle" id="resize-right" data-direction="horizontal"></div>

            <!-- Right Sidebar - YAML Preview -->
            <aside class="sidebar sidebar-right" id="sidebar-right">
                <div class="sidebar-header">
                    <h3><i class="fas fa-code"></i> YAML Preview</h3>
                    <div class="header-actions">
                        <button class="icon-btn" id="copy-yaml-btn" title="Copy YAML">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="icon-btn" id="toggle-right-sidebar" title="Toggle Sidebar">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
                <div class="sidebar-content">
                    <pre class="yaml-preview" id="yaml-preview-content" contenteditable="true" spellcheck="false"><code># Select an item to see YAML preview</code></pre>
                </div>
                <div class="sidebar-footer">
                    <button class="btn btn-primary btn-sm" id="export-yaml-btn">
                        <i class="fas fa-download"></i> Export YAML
                    </button>
                </div>
            </aside>

            <!-- Right Sidebar Collapsed Strip -->
            <div class="sidebar-collapsed-strip sidebar-collapsed-right hidden" id="sidebar-right-collapsed">
                <button class="icon-btn" id="expand-right-sidebar" title="Show YAML Preview">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Site Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-main">
                <div class="footer-copyright">
                    <span>Â© 2025 AlternativeSoap Â· All Rights Reserved</span>
                </div>
                <div class="footer-links">
                    <a href="#" id="footer-terms-link">Terms of Service</a>
                    <span class="footer-divider">Â·</span>
                    <a href="#" id="footer-license-link">License</a>
                    <span class="footer-divider">Â·</span>
                    <a href="#" id="footer-privacy-link">Privacy</a>
                    <span class="footer-divider">Â·</span>
                    <a href="#" id="footer-disclaimer-link">Disclaimer</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Legal Modal: Terms of Service -->
    <div class="legal-modal-overlay hidden" id="terms-modal-overlay">
        <div class="legal-modal">
            <div class="legal-modal-header">
                <h2><i class="fas fa-file-contract"></i> Terms of Service</h2>
                <button class="legal-modal-close" data-modal="terms-modal-overlay">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="legal-modal-body">
                <p class="legal-effective-date">Effective Date: January 1, 2025</p>
                
                <h3>1. Acceptance of Terms</h3>
                <p>By accessing or using Soaps MythicMobs Editor ("Soap's Editor"), you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use Soap's Editor.</p>
                
                <h3>2. Service Description</h3>
                <p>Soaps MythicMobs Editor is a free, browser-based configuration editor that generates YAML files compatible with the MythicMobs plugin for Minecraft servers. Soap's Editor is provided as a convenience to the community.</p>
                
                <h3>3. No Warranty</h3>
                <p>SOAP'S EDITOR IS PROVIDED "AS-IS" WITHOUT ANY WARRANTIES OF ANY KIND, EXPRESS OR IMPLIED. This includes, but is not limited to, warranties of merchantability, fitness for a particular purpose, and non-infringement.</p>
                
                <h3>4. Limitation of Liability</h3>
                <p>In no event shall AlternativeSoap or contributors be liable for any direct, indirect, incidental, special, consequential, or punitive damages arising from:</p>
                <ul>
                    <li>Use or inability to use Soap's Editor</li>
                    <li>Any errors in generated configuration files</li>
                    <li>Data loss or corruption</li>
                    <li>Server issues resulting from use of generated files</li>
                    <li>Any other damages related to Soap's Editor</li>
                </ul>
                
                <h3>5. User Responsibility</h3>
                <p>Users are solely responsible for:</p>
                <ul>
                    <li>Validating all generated configuration output before use</li>
                    <li>Testing configurations in a safe environment first</li>
                    <li>Backing up existing server data before applying changes</li>
                    <li>Ensuring compliance with their server hosting terms</li>
                </ul>
                
                <h3>6. Service Availability</h3>
                <p>Soap's Editor is provided free of charge. We reserve the right to modify, suspend, or discontinue the service at any time without prior notice.</p>
                
                <h3>7. Changes to Terms</h3>
                <p>These terms may be updated at any time. Continued use of Soap's Editor after changes constitutes acceptance of the new terms.</p>
            </div>
            <div class="legal-modal-footer">
                <button class="btn btn-primary legal-modal-close-btn" data-modal="terms-modal-overlay">I Understand</button>
            </div>
        </div>
    </div>

    <!-- Legal Modal: License -->
    <div class="legal-modal-overlay hidden" id="license-modal-overlay">
        <div class="legal-modal">
            <div class="legal-modal-header">
                <h2><i class="fas fa-balance-scale"></i> License</h2>
                <button class="legal-modal-close" data-modal="license-modal-overlay">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="legal-modal-body">
                <h3>Usage Rights</h3>
                <p>Soaps MythicMobs Editor is <strong>free to use</strong> for both personal and commercial purposes. You may use Soap's Editor to create configurations for any Minecraft server, whether for personal enjoyment or commercial server operations.</p>
                
                <h3>Intellectual Property</h3>
                <p>Soap's Editor, including its design, code, and functionality, remains the intellectual property of <strong>AlternativeSoap</strong>. All rights not explicitly granted are reserved.</p>
                
                <h3>What You May Do</h3>
                <ul>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> Use Soap's Editor for personal projects</li>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> Use Soap's Editor for commercial server configurations</li>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> Share links to Soap's Editor with others</li>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> Use generated YAML output freely</li>
                </ul>
                
                <h3>What You May Not Do</h3>
                <ul>
                    <li><i class="fas fa-times" style="color: var(--error);"></i> Claim ownership of Soap's Editor</li>
                    <li><i class="fas fa-times" style="color: var(--error);"></i> Redistribute Soap's Editor as your own work</li>
                    <li><i class="fas fa-times" style="color: var(--error);"></i> Remove or alter copyright notices</li>
                    <li><i class="fas fa-times" style="color: var(--error);"></i> Sell or sublicense Soap's Editor itself</li>
                </ul>
                
                <h3>No Ownership Transfer</h3>
                <p>Use of Soap's Editor does not grant you any ownership rights. Soap's Editor is licensed, not sold, and remains the property of its creator.</p>
                
                <h3>Attribution</h3>
                <p>While not required, attribution to "Soaps MythicMobs Editor by AlternativeSoap" is appreciated when sharing or discussing Soap's Editor.</p>
            </div>
            <div class="legal-modal-footer">
                <button class="btn btn-primary legal-modal-close-btn" data-modal="license-modal-overlay">Close</button>
            </div>
        </div>
    </div>

    <!-- Legal Modal: Disclaimer -->
    <div class="legal-modal-overlay hidden" id="disclaimer-modal-overlay">
        <div class="legal-modal">
            <div class="legal-modal-header">
                <h2><i class="fas fa-exclamation-triangle"></i> Important Disclaimer</h2>
                <button class="legal-modal-close" data-modal="disclaimer-modal-overlay">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="legal-modal-body">
                <div class="disclaimer-highlight">
                    <i class="fas fa-shield-alt"></i>
                    <div>
                        <strong>Independent Community Project</strong>
                        <p>This is a third-party, community-made configuration editor created by AlternativeSoap.</p>
                    </div>
                </div>
                
                <h3>No Affiliation</h3>
                <p>Soaps MythicMobs Editor is <strong>NOT</strong>:</p>
                <ul>
                    <li>Owned by the MythicMobs Authors</li>
                    <li>Affiliated with the MythicMobs Authors</li>
                    <li>Endorsed by the MythicMobs Authors</li>
                    <li>Officially supported by the MythicMobs Authors</li>
                </ul>
                
                <h3>No Responsibility</h3>
                <p>The MythicMobs Authors have <strong>no responsibility</strong> for Soap's Editor. They did not create it, do not maintain it, and are not liable for any issues arising from its use.</p>
                
                <div class="disclaimer-warning">
                    <i class="fas fa-ban"></i>
                    <div>
                        <strong>Do Not Contact MythicMobs Authors for Support</strong>
                        <p>Please do not contact the MythicMobs Authors for support, bug reports, or feature requests related to Soap's Editor. They cannot help you with issues regarding this editor.</p>
                    </div>
                </div>
                
                <h3>Trademark Notice</h3>
                <p>"MythicMobs" is referenced in Soap's Editor solely to describe compatibility with the MythicMobs plugin. This reference does not imply any official relationship or endorsement. All trademarks belong to their respective owners.</p>
                
                <h3>Support for Soap's Editor</h3>
                <p>For questions, issues, or feedback about Soaps MythicMobs Editor, please contact AlternativeSoap through the appropriate community channels.</p>
            </div>
            <div class="legal-modal-footer">
                <button class="btn btn-primary legal-modal-close-btn" data-modal="disclaimer-modal-overlay">I Understand</button>
            </div>
        </div>
    </div>

    <!-- Legal Modal: Privacy -->
    <div class="legal-modal-overlay hidden" id="privacy-modal-overlay">
        <div class="legal-modal">
            <div class="legal-modal-header">
                <h2><i class="fas fa-user-shield"></i> Privacy</h2>
                <button class="legal-modal-close" data-modal="privacy-modal-overlay">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="legal-modal-body">
                <div class="disclaimer-highlight">
                    <i class="fas fa-shield-alt"></i>
                    <div>
                        <strong>Your Privacy Matters</strong>
                        <p>Soap's Editor is designed with your privacy in mind. We do not track you or sell your data.</p>
                    </div>
                </div>
                
                <h3>No Cookies</h3>
                <p>Soap's Editor does <strong>not use cookies</strong>. We do not place any tracking cookies, advertising cookies, or third-party cookies on your device.</p>
                
                <h3>Local Storage</h3>
                <p>Soap's Editor uses your browser's <strong>localStorage</strong> to save:</p>
                <ul>
                    <li><i class="fas fa-folder" style="color: var(--accent-primary);"></i> Your packs, mobs, skills, items, and droptables</li>
                    <li><i class="fas fa-cog" style="color: var(--accent-primary);"></i> Your editor preferences and settings</li>
                    <li><i class="fas fa-star" style="color: var(--accent-primary);"></i> Your favorites and recent files</li>
                    <li><i class="fas fa-columns" style="color: var(--accent-primary);"></i> Panel sizes and UI preferences</li>
                </ul>
                <p>This data <strong>stays on your device</strong> and is never sent to any server unless you explicitly choose to sync.</p>
                
                <h3>Optional Cloud Sync</h3>
                <p>If you choose to create an account and enable cloud sync:</p>
                <ul>
                    <li>Your email address is stored for authentication</li>
                    <li>Your packs and templates are stored on secure servers (Supabase)</li>
                    <li>You can delete your account and data at any time</li>
                </ul>
                <p>Cloud sync is <strong>completely optional</strong>. Soap's Editor works fully offline without an account.</p>
                
                <h3>No Analytics or Tracking</h3>
                <p>Soap's Editor does <strong>not</strong> use:</p>
                <ul>
                    <li><i class="fas fa-times" style="color: var(--error);"></i> Google Analytics or similar tracking services</li>
                    <li><i class="fas fa-times" style="color: var(--error);"></i> Advertising networks</li>
                    <li><i class="fas fa-times" style="color: var(--error);"></i> User behavior tracking</li>
                    <li><i class="fas fa-times" style="color: var(--error);"></i> Fingerprinting techniques</li>
                </ul>
                
                <h3>Third-Party Services</h3>
                <p>Soap's Editor loads resources from:</p>
                <ul>
                    <li><strong>Google Fonts</strong> â€” For typography (Inter, JetBrains Mono)</li>
                    <li><strong>Font Awesome CDN</strong> â€” For icons</li>
                    <li><strong>Supabase</strong> â€” For optional cloud sync and authentication</li>
                </ul>
                <p>These services have their own privacy policies.</p>
                
                <h3>Your Rights</h3>
                <p>You have full control over your data:</p>
                <ul>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> Clear localStorage anytime via browser settings</li>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> Export your packs before clearing data</li>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> Delete your cloud account if registered</li>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> Use the editor without any account</li>
                </ul>
            </div>
            <div class="legal-modal-footer">
                <button class="btn btn-primary legal-modal-close-btn" data-modal="privacy-modal-overlay">Close</button>
            </div>
        </div>
    </div>

    <!-- Modal Container -->
    <div id="modal-container"></div>

    <!-- Toast Notifications -->
    <div id="toast-container"></div>

    <!-- Command Palette -->
    <div id="command-palette" class="command-palette hidden">
        <div class="command-palette-content">
            <input type="text" id="command-input" placeholder="Type a command or 'help' for shortcuts..." autocomplete="off">
            <div id="command-results">
                <div class="command-hint">
                    <i class="fas fa-lightbulb"></i>
                    <span>Try typing <strong>help</strong> to see all keyboard shortcuts</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Context Menu -->
    <div id="context-menu" class="context-menu hidden"></div>

    <!-- Change History Modal -->
    <div id="change-history-modal" class="modal hidden">
        <div class="modal-content change-history-modal">
            <div class="modal-header">
                <h3><i class="fas fa-history"></i> Change History</h3>
                <button class="icon-btn" id="close-history-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="history-filters">
                    <input type="text" class="form-input" id="history-search" placeholder="Search changes...">
                    <button class="btn btn-sm btn-secondary" id="clear-history-btn">
                        <i class="fas fa-trash"></i> Clear History
                    </button>
                </div>
                <div class="history-list" id="full-history-list">
                    <div class="no-changes">No changes recorded</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-content settings-modal">
            <div class="modal-header">
                <h3><i class="fas fa-cog"></i> Settings</h3>
                <button class="icon-btn" id="close-settings-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="settings-tabs">
                    <button class="settings-tab active" data-tab="general">General</button>
                    <button class="settings-tab" data-tab="editor">Editor</button>
                    <button class="settings-tab" data-tab="files">Files</button>
                    <button class="settings-tab" data-tab="history">History</button>
                </div>
                
                <div class="settings-content">
                    <!-- General Settings -->
                    <div class="settings-panel active" id="settings-general">
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Auto-save</label>
                                <span class="setting-description">Automatically save files after changes</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="setting-autosave">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Auto-save Interval</label>
                                <span class="setting-description">Delay before auto-saving (seconds)</span>
                            </div>
                            <div class="setting-control">
                                <input type="range" id="setting-autosave-interval" min="1" max="10" value="2" step="1">
                                <span class="range-value" id="autosave-interval-value">2s</span>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Animations</label>
                                <span class="setting-description">Enable UI animations and transitions</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="setting-animations" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Editor Settings -->
                    <div class="settings-panel" id="settings-editor">
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Live YAML Preview</label>
                                <span class="setting-description">Update YAML preview as you type</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="setting-live-preview" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Preview Update Delay</label>
                                <span class="setting-description">Delay before updating preview (milliseconds)</span>
                            </div>
                            <div class="setting-control">
                                <input type="range" id="setting-preview-delay" min="100" max="1000" value="300" step="50">
                                <span class="range-value" id="preview-delay-value">300ms</span>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Default Mode</label>
                                <span class="setting-description">Default editor mode on startup</span>
                            </div>
                            <select class="form-select" id="setting-default-mode">
                                <option value="beginner">Beginner</option>
                                <option value="advanced">Advanced</option>
                            </select>
                        </div>
                        <div class="setting-item advanced-only">
                            <div class="setting-info">
                                <label class="setting-label">Delay Display Mode</label>
                                <span class="setting-description">How to display delay mechanics in skill editor</span>
                            </div>
                            <select class="form-select" id="setting-delay-display-mode">
                                <option value="ticks">Ticks (Minecraft ticks)</option>
                                <option value="seconds">Seconds (20 ticks = 1s)</option>
                            </select>
                        </div>
                        <div class="setting-item advanced-only">
                            <div class="setting-info">
                                <label class="setting-label">Compact Mode</label>
                                <span class="setting-description">Reduce spacing in editor UI</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="setting-compact-mode">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- File Settings -->
                    <div class="settings-panel" id="settings-files">
                        <div class="setting-item advanced-only">
                            <div class="setting-info">
                                <label class="setting-label">Include Default Values</label>
                                <span class="setting-description">Include default values in YAML export</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="setting-include-defaults">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Auto-format YAML</label>
                                <span class="setting-description">Automatically format YAML on save</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="setting-auto-format" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Warn on Duplicate File Names</label>
                                <span class="setting-description">Show warning when creating files with existing names</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="setting-warn-duplicate-files" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-item advanced-only">
                            <div class="setting-info">
                                <label class="setting-label">Internal Name Space Replacement</label>
                                <span class="setting-description">Character used to replace spaces in internal names (e.g., "My Skill" â†’ "My<span id="separator-preview">_</span>Skill")</span>
                            </div>
                            <div class="setting-control">
                                <select class="form-select" id="setting-internal-name-separator" style="width: 120px;">
                                    <option value="_">_ (underscore)</option>
                                    <option value="-">- (hyphen)</option>
                                    <option value=".">. (period)</option>
                                    <option value="|">| (pipe)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- History Settings -->
                    <div class="settings-panel" id="settings-history">
                        <div class="setting-item">
                            <div class="setting-info">
                                <label class="setting-label">Keep Change History</label>
                                <span class="setting-description">Track file changes in history</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="setting-keep-history" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-item advanced-only">
                            <div class="setting-info">
                                <label class="setting-label">Max History Entries</label>
                                <span class="setting-description">Maximum number of changes to remember</span>
                            </div>
                            <div class="setting-control">
                                <input type="range" id="setting-max-history" min="50" max="500" value="100" step="50">
                                <span class="range-value" id="max-history-value">100</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="reset-settings-btn">
                    <i class="fas fa-undo"></i> Reset to Defaults
                </button>
                <button class="btn btn-primary" id="save-settings-btn">
                    <i class="fas fa-check"></i> Save Settings
                </button>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div class="modal-overlay hidden" id="authModal">
        <div class="modal modal-medium">
            <div class="modal-header">
                <h2 id="auth-modal-title">
                    <i class="fas fa-user-circle"></i> Sign In
                </h2>
                <button class="modal-close" id="auth-modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="auth-tabs" id="authTabs">
                    <button class="auth-tab active" id="loginTab" data-tab="login">Sign In</button>
                    <button class="auth-tab" id="signupTab" data-tab="signup">Sign Up</button>
                </div>
                
                <!-- Login Form -->
                <form class="auth-form active" id="loginForm">
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="loginEmail" placeholder="your@email.com" autocomplete="email" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-input" id="loginPassword" placeholder="Enter your password" autocomplete="current-password" required>
                    </div>
                    <div class="auth-error" id="loginError"></div>
                    <div class="auth-success" id="loginSuccess"></div>
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-sign-in-alt"></i> Sign In
                    </button>
                    <a href="#" class="forgot-password" id="forgotPasswordBtn">Forgot password?</a>
                </form>
                
                <!-- Signup Form -->
                <form class="auth-form" id="signupForm">
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="signupEmail" placeholder="your@email.com" autocomplete="email" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-input" id="signupPassword" placeholder="Choose a password (min 6 characters)" autocomplete="new-password" required minlength="6">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Confirm Password</label>
                        <input type="password" class="form-input" id="confirmPassword" placeholder="Confirm your password" autocomplete="new-password" required minlength="6">
                    </div>
                    <div class="auth-info">
                        <i class="fas fa-info-circle"></i>
                        Your anonymous data will be automatically transferred to your new account.
                    </div>
                    <div class="auth-error" id="signupError"></div>
                    <div class="auth-success" id="signupSuccess"></div>
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-user-plus"></i> Create Account
                    </button>
                </form>
                
                <!-- Reset Password Form -->
                <form class="auth-form" id="resetPasswordForm">
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="resetEmail" placeholder="your@email.com" autocomplete="email" required>
                    </div>
                    <div class="auth-info">
                        <i class="fas fa-info-circle"></i>
                        We'll send you a link to reset your password.
                    </div>
                    <div class="auth-error" id="resetError"></div>
                    <div class="auth-success" id="resetSuccess"></div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="backToLoginBtn">
                            <i class="fas fa-arrow-left"></i> Back
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i> Send Reset Link
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>

    <!-- Data Files -->
    <script src="data/mobData.js"></script>
    <script src="data/vanillaMobStats.js"></script>
    <script src="data/templates.js"></script>
    <script src="data/entityFieldMap.js"></script>
    <script src="data/minecraftBlocks.js"></script>
    <script src="data/minecraftItems.js"></script>
    <script src="data/damageTypes.js"></script>
    <script src="data/bossBarData.js"></script>
    <script src="data/equipmentData.js"></script>
    <script src="data/aiGoals.js"></script>
    <script src="data/aiTargets.js"></script>
    <script src="data/vanillaOverrides.js"></script>
    <script src="data/powerSystem.js"></script>
    <script src="data/dropTypes.js"></script>
    <script src="data/fancyDrops.js"></script>
    
    <!-- Item Editor Data Files -->
    <script src="data/itemOptions.js"></script>
    <script src="data/enchantments.js"></script>
    <script src="data/potionEffects.js"></script>
    <script src="data/bannerPatterns.js"></script>
    
    <!-- Item Editor Components -->
    <script src="components/bannerRenderer.js"></script>
    
    <!-- Documentation Files -->
    <script src="data/audienceDocumentation.js"></script>
    <script src="data/mathDocumentation.js"></script>
    
    <!-- Conditions System (Load Order Critical) -->
    <script src="data/conditions/conditionActions.js"></script>
    <script src="data/conditions/entityConditions.js"></script>
    <script src="data/conditions/entityConditionsAdvanced.js"></script>
    <script src="data/conditions/locationConditions.js"></script>
    <script src="data/conditions/compareConditions.js"></script>
    <script src="data/conditions/metaConditions.js"></script>
    <script src="data/conditions/metaConditionsAdvanced.js"></script>
    <script src="data/conditions/metaConditionsFinal.js"></script>
    <script src="data/conditions/index.js"></script>

    <!-- Skill System Data (Load Before Components) -->
    <script src="data/targeters.js"></script>
    <script src="data/particleTypes.js"></script>
    <script src="data/mechanics.js"></script>

    <!-- Utility Files -->
    <script src="utils/logger.js"></script>
    <script src="utils/browserPerformance.js"></script>
    <script src="utils/dataStructureOptimizer.js"></script>
    <script src="utils/favoritesManager.js"></script>
    <script src="utils/graphUtils.js"></script>
    <script src="utils/helpers.js"></script>
    <script src="utils/yamlParser.js"></script>
    <script src="utils/yamlExporter.js"></script>
    <script src="utils/validators.js"></script>
    <script src="utils/skillLineParser.js"></script>
    <script src="utils/skillLineValidator.js"></script>
    <script src="utils/mechanics.js"></script>
    <script src="utils/triggers.js"></script>
    <script src="utils/targeters.js"></script>
    <script src="utils/mobTypes.js"></script>
    <script src="utils/materials.js"></script>
    <script src="utils/editorHistory.js"></script>
    <script src="utils/collapsibleManager.js"></script>
    <script src="utils/panelResizer.js"></script>
    
    <!-- Smart Features -->
    <script src="utils/autocompleteLearning.js"></script>
    <script src="utils/intelligentCacheManager.js"></script>
    <script src="utils/smartDuplicateDetector.js"></script>
    <script src="utils/devicePerformanceDetector.js"></script>
    <script src="utils/smartFavoritesManager.js"></script>
    
    <!-- Performance Optimization -->
    <script src="utils/performanceMonitor.js"></script>

    <!-- Trigger System -->
    <script src="data/triggers.js"></script>

    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Component Files -->
    <script src="components/supabaseClient.js"></script>
    <script src="components/authManager.js"></script>
    <script src="components/authUI.js"></script>
    <script src="components/storageManager.js"></script>
    <script src="components/contextMenu.js"></script>
    <script src="components/packManager.js"></script>
    <script src="components/fileManager.js"></script>
    <script src="components/documentationHelper.js"></script>
    <script src="components/mobEditor/EntityFieldManager.js"></script>
    
    <!-- Core Systems -->
    <script src="utils/errorLogger.js"></script>
    <script src="utils/activityTracker.js"></script>
    <script src="utils/permissionSystem.js"></script>
    <script src="components/userProfileManager.js"></script>
    
    <!-- Enhanced Dropdown with Categories & Icons -->
    <script src="data/minecraftItemCategories.js"></script>
    <script src="data/minecraftItemIcons.js"></script>
    <script src="components/searchableDropdown.js?v=3.0"></script>
    <script src="components/bossBarEditor.js"></script>
    <script src="components/equipmentEditor.js"></script>
    <script src="components/damageModifierEditor.js"></script>
    <script src="components/aiEditor.js"></script>
    <script src="components/vanillaOverridesEditor.js"></script>
    <script src="components/powerSystemEditor.js"></script>
    
    <script src="components/conditionBrowser.js?v=3.7"></script>
    <script src="components/inlineConditionBuilder.js"></script>
    <script src="components/triggerBrowser.js"></script>
    <script src="components/targeterBrowser.js?v=3.8"></script>
    <script src="components/mechanicBrowser.js"></script>
    <script src="components/skillBrowser.js"></script>
    <script src="components/creationModeSelector.js"></script>
    <script src="components/notificationModal.js"></script>
    <script src="components/templateManager.js"></script>
    <script src="components/templateImportExport.js"></script>
    <script src="components/templateMigration.js"></script>
    <script src="components/yamlPreviewModal.js"></script>
    <script src="components/browserDataMerger.js"></script>
    <script src="components/browserAdminManager.js"></script>
    <script src="components/attributeBuilder.js"></script>
    <script src="components/adminManager.js"></script>
    <script src="components/adminPanel.js"></script>
    
    <!-- PERFORMANCE: Browser Singleton Manager (MUST load AFTER all browser components) -->
    <script src="utils/browserSingletonManager.js"></script>
    
    <!-- Mode Comparison Modal -->
    <div class="modal" id="mode-comparison-modal" style="display: none;">
        <div class="modal-content mode-comparison-content">
            <div class="modal-header">
                <h2><i class="fas fa-layer-group"></i> Beginner vs Advanced Mode</h2>
                <button class="modal-close" id="close-mode-comparison">&times;</button>
            </div>
            <div class="modal-body">
                <p class="mode-comparison-intro">Choose the mode that fits your experience level. You can switch anytime!</p>
                
                <div class="mode-comparison-grid">
                    <!-- Beginner Mode Column -->
                    <div class="mode-column beginner-column">
                        <div class="mode-column-header">
                            <i class="fas fa-user"></i>
                            <h3>Beginner Mode</h3>
                            <span class="mode-badge beginner">Recommended for Starters</span>
                        </div>
                        <div class="mode-column-body">
                            <p class="mode-description">Essential features to get you started quickly without overwhelming options.</p>
                            
                            <div class="feature-category">
                                <h4><i class="fas fa-check-circle"></i> Included Features</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-skull"></i> Create Mobs (Core Properties)</li>
                                    <li><i class="fas fa-magic"></i> Create Skills (Basic Mechanics)</li>
                                    <li><i class="fas fa-gem"></i> Create Items (Essential Options)</li>
                                    <li><i class="fas fa-table"></i> Create Drop Tables</li>
                                    <li><i class="fas fa-heart"></i> Health & Damage Settings</li>
                                    <li><i class="fas fa-tag"></i> Display Names & Lore</li>
                                    <li><i class="fas fa-shield-alt"></i> Basic Enchantments</li>
                                    <li><i class="fas fa-cube"></i> Basic Attributes</li>
                                    <li><i class="fas fa-save"></i> Save & Export YAML</li>
                                    <li><i class="fas fa-file-import"></i> Import Packs</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Advanced Mode Column -->
                    <div class="mode-column advanced-column">
                        <div class="mode-column-header">
                            <i class="fas fa-user-cog"></i>
                            <h3>Advanced Mode</h3>
                            <span class="mode-badge advanced">Full Feature Set</span>
                        </div>
                        <div class="mode-column-body">
                            <p class="mode-description">Everything in Beginner mode, plus advanced features and tools for power users.</p>
                            
                            <div class="feature-category">
                                <h4><i class="fas fa-plus-circle"></i> Additional Features</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-wrench"></i> <strong>Tools Menu</strong> - Pack Statistics, Dependency Graph, Validators</li>
                                    <li><i class="fas fa-history"></i> <strong>Recent Changes Tracker</strong> - Detailed edit history</li>
                                    <li><i class="fas fa-map-marked-alt"></i> <strong>RandomSpawn Editor</strong> - Mob spawn configuration</li>
                                    <li><i class="fas fa-file-code"></i> <strong>Direct YAML Import</strong> - Import raw YAML files</li>
                                    <li><i class="fas fa-crown"></i> <strong>BossBar Settings</strong> - Custom boss health bars</li>
                                    <li><i class="fas fa-puzzle-piece"></i> <strong>Modules System</strong> - MythicMobs modules</li>
                                    <li><i class="fas fa-bolt"></i> <strong>Power System</strong> - Advanced mob abilities</li>
                                    <li><i class="fas fa-code"></i> <strong>NBT Data</strong> - Custom item NBT tags</li>
                                    <li><i class="fas fa-gem"></i> <strong>Crucible Skills</strong> - Item-based skills</li>
                                    <li><i class="fas fa-book"></i> <strong>Advanced Item Options</strong> - Armor trim, books, banners</li>
                                    <li><i class="fas fa-filter"></i> <strong>Conditions System</strong> - Skill conditions, target conditions, triggers</li>
                                    <li><i class="fas fa-cogs"></i> <strong>Advanced Settings</strong> - Delay modes, compact UI, separators</li>
                                    <li><i class="fas fa-clock"></i> <strong>Extended History</strong> - Configurable history size</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mode-comparison-footer">
                    <p><i class="fas fa-lightbulb"></i> <strong>Tip:</strong> Start with Beginner mode and switch to Advanced when you need more features!</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Pack Tools -->
    <script src="components/dependencyGraph.js"></script>
    <script src="components/packStatistics.js"></script>
    <script src="components/duplicateDetector.js"></script>
    <script src="components/packValidator.js"></script>
    <script src="components/skillUsageReport.js"></script>
    <script src="components/backupManager.js"></script>
    
    <script src="components/templateWizard.js"></script>
    <script src="components/templateEditor.js"></script>
    <script src="components/templateSelector.js"></script>
    <script src="components/skillLineBuilder.js?v=3.9"></script>
    <script src="components/mechanicReference.js"></script>
    <script src="components/skillLineAutocomplete.js"></script>
    <script src="components/skillLineGroupDetector.js"></script>
    <script src="components/skillLineQuickEdit.js"></script>
    <script src="components/skillLineTooltip.js"></script>
    <script src="components/validationPanel.js"></script>
    <script src="components/skillDependencyTracker.js"></script>
    <script src="components/skillLineFormatter.js"></script>
    <script src="components/skillLineDuplicateDetector.js"></script>
    <script src="components/skillLineSyntaxHighlighter.js"></script>
    <script src="components/keyboardShortcutManager.js"></script>
    <script src="components/historyManager.js"></script>
    <script src="components/onboardingTour.js"></script>
    <script src="utils/performanceUtils.js"></script>
    <script src="utils/lazyLoader.js"></script>
    <script src="utils/workerPool.js"></script>
    <script src="utils/delayAnalyzer.js"></script>
    <!-- virtualScrollManager.js moved up to load BEFORE browsers (line ~875) -->
    <script src="components/skillBuilderEditor.js"></script>
    <script src="components/mobDropsEditor.js"></script>
    <!-- Mob Editor Components -->
    <script src="components/totemRenderer.js"></script>
    <script src="components/mobEditor.js"></script>
    <script src="components/skillEditor.js"></script>
    <script src="components/itemEditor.js"></script>
    <script src="components/droptableEditor.js"></script>
    <script src="components/randomspawnEditor.js"></script>
    <script src="components/yamlEditor.js"></script>
    <script src="components/displayNameBuilder.js"></script>
    <script src="components/commandPalette.js"></script>
    <script src="components/adminPanelEnhanced.js"></script>

    <!-- Pack Importer System -->
    <script src="components/packImporter/PackFolderScanner.js"></script>
    <script src="components/packImporter/YamlFileParser.js"></script>
    <script src="components/packImporter/DataValidator.js"></script>
    <script src="components/packImporter/DataValidatorHelpers.js"></script>
    <script src="components/packImporter/ImportPreviewUI.js"></script>
    <script src="components/packImporter/ImportPreviewUIHandlers.js"></script>
    <script src="components/packImporter/ImportExecutor.js"></script>
    <script src="components/packImporter/ImportReportGenerator.js"></script>
    <script src="components/packImporter/PackImporterCore.js"></script>

    <!-- Main Application -->
    <script src="app.js"></script>

    <!-- Initialize -->
    <script>
        // Initialize the application when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize global keyboard shortcut manager
            window.keyboardShortcutManager = new KeyboardShortcutManager();
            
            // Initialize global notification modal
            window.notificationModal = new NotificationModal();
            
            // Initialize global skill line builder (will be updated with dependencies later)
            window.skillLineBuilder = new SkillLineBuilder();
            
            window.editor = new MythicMobsEditor();
            window.editor.init();
            
            // Initialize template system AFTER editor (requires auth and supabase)
            setTimeout(() => {
                if (window.supabaseClient && window.editor?.authManager) {
                    // Expose authManager globally for template system
                    window.authManager = window.editor.authManager;
                    
                    window.templateManager = new TemplateManager(window.supabaseClient, window.authManager);
                    window.templateImportExport = new TemplateImportExport(window.templateManager);
                    window.templateMigration = new TemplateMigration(window.supabaseClient, window.authManager, window.templateManager);
                    window.yamlPreviewModal = new YamlPreviewModal();
                    window.templateEditor = new TemplateEditor(window.templateManager, window.authManager, window.templateImportExport);
                    window.templateWizard = new TemplateWizard(window.templateManager, window.authManager, window.templateImportExport);
                    
                    // Initialize activity tracker for user activity logging
                    window.activityTracker = new ActivityTracker(window.supabaseClient, window.authManager);
                    
                    // Track login if user is authenticated
                    if (window.authManager?.isAuthenticated()) {
                        window.activityTracker.trackLogin('session_init');
                    }
                    
                    // Update global SkillLineBuilder with template dependencies
                    if (window.skillLineBuilder) {
                        window.skillLineBuilder.templateManager = window.templateManager;
                        window.skillLineBuilder.templateEditor = window.templateEditor;
                    }
                    
                    // Make templateWizard globally accessible for onclick handlers
                    window.templateWizard = window.templateWizard;
                    
                    // Initialize admin system
                    window.adminManager = new AdminManager(window.supabaseClient, window.authManager);
                    window.adminManager.initialize().then(() => {
                        // Create admin panel if user is admin
                        if (window.adminManager.isAdmin) {
                            window.adminPanel = new AdminPanel(window.adminManager, window.templateManager, window.authManager);
                            
                            // Initialize enhanced admin panel features
                            window.adminPanelEnhanced = new AdminPanelEnhanced(window.adminPanel);
                            
                            // Add admin role label to user-type (replaces email badge to avoid duplication)
                            const userType = document.getElementById('user-type');
                            if (userType) {
                                const role = window.adminManager.getCurrentRole();
                                const roleDisplay = role ? role.replace('_', ' ').toUpperCase() : 'ADMIN';
                                userType.innerHTML = `<i class="fas fa-shield-alt" style="color: #ffd700;"></i> ${roleDisplay}`;
                            }
                            
                            // Add admin panel button to user dropdown
                            const userDropdown = document.getElementById('user-dropdown');
                            const loginBtn = document.getElementById('loginBtn');
                            if (userDropdown && loginBtn && window.authManager?.isAuthenticated()) {
                                // Add Profile button (only for authenticated users)
                                const profileBtn = document.createElement('button');
                                profileBtn.className = 'btn btn-secondary';
                                profileBtn.style.marginBottom = '10px';
                                profileBtn.innerHTML = `<i class="fas fa-user"></i> Edit Profile`;
                                profileBtn.onclick = () => window.userProfileManager?.showProfileEditor();
                                userDropdown.insertBefore(profileBtn, loginBtn);
                                
                                // Add Admin Panel button
                                const adminBtn = document.createElement('button');
                                adminBtn.className = 'btn btn-primary';
                                adminBtn.style.marginBottom = '10px';
                                adminBtn.innerHTML = `<i class="fas fa-shield-alt"></i> Admin Panel`;
                                adminBtn.onclick = () => window.adminPanel.open();
                                
                                // Insert before login button
                                userDropdown.insertBefore(adminBtn, loginBtn);
                            }
                        } else {
                            
                            // Add profile button for non-admin authenticated users
                            const userDropdown = document.getElementById('user-dropdown');
                            const loginBtn = document.getElementById('loginBtn');
                            if (userDropdown && loginBtn && window.authManager?.isAuthenticated()) {
                                const profileBtn = document.createElement('button');
                                profileBtn.className = 'btn btn-secondary';
                                profileBtn.style.marginBottom = '10px';
                                profileBtn.innerHTML = `<i class="fas fa-user"></i> Edit Profile`;
                                profileBtn.onclick = () => window.userProfileManager?.showProfileEditor();
                                userDropdown.insertBefore(profileBtn, loginBtn);
                            }
                        }
                    }).catch(error => {
                        console.error('âŒ Admin system initialization failed:', error);
                    });
                    
                    // Update any existing SkillBuilderEditor instances with the new dependencies
                    if (window.editor.skillEditor?.skillBuilderEditor) {
                        window.editor.skillEditor.skillBuilderEditor.updateTemplateDependencies(
                            window.templateManager, 
                            window.templateEditor
                        );
                    }
                    if (window.editor.mobEditor?.skillsEditor) {
                        window.editor.mobEditor.skillsEditor.updateTemplateDependencies(
                            window.templateManager,
                            window.templateEditor
                        );
                    }
                } else {
                    console.warn('âš ï¸ Template system not initialized: supabaseClient or authManager missing');
                }
            }, 500);
            
            // ==========================================
            // Legal Modal System
            // ==========================================
            
            // Modal open handlers
            document.getElementById('footer-terms-link')?.addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('terms-modal-overlay').classList.remove('hidden');
            });
            
            document.getElementById('footer-license-link')?.addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('license-modal-overlay').classList.remove('hidden');
            });
            
            document.getElementById('footer-disclaimer-link')?.addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('disclaimer-modal-overlay').classList.remove('hidden');
            });
            
            document.getElementById('footer-privacy-link')?.addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('privacy-modal-overlay').classList.remove('hidden');
            });
            
            // Modal close handlers - close buttons
            document.querySelectorAll('.legal-modal-close, .legal-modal-close-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const modalId = btn.getAttribute('data-modal');
                    if (modalId) {
                        document.getElementById(modalId).classList.add('hidden');
                    }
                });
            });
            
            // Modal close handlers - click on overlay background
            document.querySelectorAll('.legal-modal-overlay').forEach(overlay => {
                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) {
                        overlay.classList.add('hidden');
                    }
                });
            });
            
            // Modal close handlers - ESC key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    document.querySelectorAll('.legal-modal-overlay:not(.hidden)').forEach(modal => {
                        modal.classList.add('hidden');
                    });
                }
            });
        });
    </script>
</body>
</html>
